<div class="image-wrapper">
  <%= image_tag "https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Restaurant_-TCH.jpg/1200px-Restaurant_-TCH.jpg", class: "rounded object-fit-cover custom-image",  alt: @recommendation.name %>
</div>
<div class="container-fluid">
  <%# Title with like and share %>
  <div class="d-flex justify-content-between gap-1">
    <h1 class="mt-2"><%= @recommendation.name %></h1>
    <%# Like and Share %>
    <div class="d-flex justify-content-end gap-3 align-items-center" data-controller="icons">
      <a class="text-decoration-none text-black-50">
        <i data-icons-target="heartIcon" class="fa-sharp fa-regular fa-heart" data-action="mouseover->icons#hover mouseout->icons#unhover click->icons#click"></i>
      </a>
      <%# TODO: test share is working %>
      <a class="text-decoration-none text-black-50">
        <i data-icons-target="shareIcon" class="fa-solid fa-arrow-up-from-bracket" data-action="click->icons#share"></i>
      </a>
    </div>
  </div>
  <%# Pill with recommendation type %>
  <p>
    <span class="badge rounded-pill fw-normal mb-0">
      <%= @recommendation.recommendation_type %></span>
  </p>
  <%# Ratings %>
  <div class="d-flex gap-2 align-items-center mb-3">
    <i class="fa-sharp fa-solid fa-star"></i>
    <p class="mb-0"><%= @recommendation.rating %></p>
  </div>
  <%# Address %>
  <div class="d-flex gap-2 align-items-center mb-3">
    <i class="fa-solid fa-location-dot"></i>
    <%= @recommendation.address %>
  </div>
  <%# Description %>
  <p><%= @recommendation.description %></p>
  <%# User and visit date %>
  <div class="d-flex justify-content-end gap-2 align-items-center mb-3">
    <%= @recommendation.user.user_name %>
    <%= @recommendation.visit_date %>
  </div>
  <%# Reviews %>
  <div data-controller="insert-in-reviews">
    <div class="d-flex flex-row align-items-center justify-content-between mb-4">
      <h3 class="mb-0">Reviews <span class="review-count">(<%= @reviews.count %>)</span></h3>
      <button class="border-0 bg-transparent" data-action="click->insert-in-reviews#openModal"><i class="fa-regular fa-pen-to-square"></i></button>
      <%# Test modal %>
      <div class="modal" data-insert-in-reviews-target="modal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Add Review</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Modal body text goes here.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Submit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <% if @reviews.any? %>
      <% @reviews.each do |review| %>
        <%= render "review_card", review: review %>
      <% end %>
    <% else %>
      <p>No reviews yet</p>
    <% end %>
  </div>
</div>
